"use strict";var Poker=function(){var e=this;this.popup=document.querySelector(".popup"),this.popupClose=document.querySelector(".popup__close"),this.cardList=document.querySelector(".card__list"),this.images=["hand-1.png","hand-2.png","hand-3.png","hand-4.png","hand-5.png","hand-6.png","hand-7.png","hand-8.png","hand-9.png","hand-10.png"],this.combName=["Роял Стрит Флэш","Стрит Флэш","Каре","Фулл хаус","Флеш","Стрит","Тройка","Две пары","Пара","Старшая карта"],this.combDesc=["5 старших карт одной масти","любые пять карт одной масти по порядку","четыре карты одного достоинства","одна тройка и одна пара","пять карт одной масти","пять карт по порядку любых мастей","три карты одного достоинства","две пары карт одного достоинства","две карты одного достоинства","ни одна из вышеописанных комбинаций"],this.setCardSize=function(){var t=e.cardList.children,n=document.querySelector(".container").clientHeight,o=window.innerWidth<window.innerHeight?5:2;[].forEach.call(t,function(e){e.style.cssText="height:"+n/o+"px"})},this.showPopup=function(t){var n=document.querySelector(".popup__image"),o=document.querySelector(".popup__title"),i=document.querySelector(".popup__desc");e.popup.classList.add("popup--open"),n.style.backgroundImage="url(img/hand-"+t+".png)",o.innerText=""+e.combName[t-1],i.innerText=""+e.combDesc[t-1]},this.hidePopup=function(){e.popup.classList.remove("popup--open")},this.showPercent=function(e,t){var n=Math.round(e/t*100),o=document.querySelector(".preload__percent"),i=document.querySelector(".preload__line");o.setAttribute("data-percent",n),i.style.width=n+"%",e==t&&document.body.removeChild(document.querySelector(".preload"))},this.setTransformOrigin=function(t,n){e.popup.style.cssText="-webkit-transform-origin: "+t+"% "+n+"% 0;\n                                    transform-origin: "+t+"% "+n+"% 0;"},this.preloadImages=function(){for(var t=[],n=e.images.length,o=0,i=0;i<n;i++)t[i]=new Image,t[i].src="img/"+e.images[i],t[i].onload=function(){o++,e.showPercent(o,n),e.images.length==o&&e.setCardSize()}},this.popupClose.addEventListener("click",e.hidePopup),this.cardList.addEventListener("click",function(t){var n=t.pageX/window.innerWidth*100,o=t.pageY/window.innerHeight*100,i=t.target;"card__image"!=t.target.className&&"card__title"!=t.target.className||(i=t.target.parentNode),e.setTransformOrigin(n,o),e.showPopup(i.getAttribute("data-index"))}),window.addEventListener("resize",e.setCardSize)};window.addEventListener("DOMContentLoaded",function(){var e=new Poker;e.preloadImages()});