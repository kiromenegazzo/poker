"use strict";var Poker=function(){var e=document.querySelector(".popup"),t=document.querySelector(".popup__close"),n=document.querySelector(".card__list"),o=!!navigator.userAgent.match(/iPad|iPhone|Mobile|Android|Windows Phone/g),i=null,a=function(){var e=document.getElementsByClassName("card__item"),t=document.querySelector(".container"),n=t.clientHeight,o=window.innerWidth<window.innerHeight?5:2;[].forEach.call(e,function(e){e.style.height=n/o+"px"})},r=function(e){var t=document.querySelector(".popup__image use"),n=document.querySelector(".popup__title"),o=document.getElementsByClassName("card__title")[e-1],i=document.querySelector(".popup__desc");t.setAttribute("xlink:href","#"+e),n.innerText=""+o.innerText,i.innerText=""+o.getAttribute("data-desc")},d=function(){null!==i&&t.focus(),e.classList.add("popup--open")},c=function(){null!==i&&i.focus(),e.classList.remove("popup--open")},u=function(t,n){e.style.cssText="-webkit-transform-origin: "+t+"% "+n+"% 0;\n                                    transform-origin: "+t+"% "+n+"% 0;"},l=function(){var e=Math.round(event.pageX/window.innerWidth*100)||"50",t=Math.round(event.pageY/window.innerHeight*100)||"50",n=event.target;"svg"==event.target.tagName||"card__title"==event.target.className?n=event.target.parentNode:"use"==event.target.tagName&&(n=event.target.parentNode.parentNode),u(e,t),r(n.getAttribute("data-card")),i=o?null:n,d()},s=function(){var e=event.type;"keydown"===e?13!==event.keyCode&&32!==event.keyCode||l():"click"===e&&l()},p=function(){var e=document.querySelectorAll(".card__image use");[].forEach.call(e,function(e,t){e.setAttribute("xlink:href","#"+(t+1))})};this.preloadSprite=function(){var t=document.body,n=document.querySelector(".preload"),o=new XMLHttpRequest;o.open("GET","img/sprite.svg",!0),o.send(),o.onload=function(o){t.removeChild(n),e.insertAdjacentHTML("afterEnd",o.target.response),p()}};var v=function(){window.applicationCache&&window.applicationCache.status==window.applicationCache.UPDATEREADY&&(window.applicationCache.swapCache(),confirm("A new version of this site is available. Load it?")&&window.location.reload())};t.addEventListener("click",c),n.addEventListener("click",s),n.addEventListener("keydown",s),e.addEventListener("keydown",function(e){"9"==e.keyCode?e.preventDefault():"27"==e.keyCode&&c()}),a(),window.addEventListener("resize",a),window.applicationCache.addEventListener("updateready",v)};window.addEventListener("DOMContentLoaded",function(){var e=new Poker;e.preloadSprite()});